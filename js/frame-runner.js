!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,r.c=t,r.p="",r(0)}([function(module,exports){document.addEventListener("DOMContentLoaded",function(){var testTimeout=5e3,Rx=document.Rx,frameReady=document.__frameReady,chai=parent.chai,source=document.__source,__getUserInput=document.__getUserInput||(e=>e),checkChallengePayload=document.__checkChallengePayload;function isPromise(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const DeepEqual=(e,t)=>JSON.stringify(e)===JSON.stringify(t);var DeepFreeze=e=>(Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){!e.hasOwnProperty(t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||DeepFreeze(e[t])}),e);document.Enzyme&&(window.Enzyme=document.Enzyme),document.__getJsOutput=function getJsOutput(){if(window.__err)return window.__err;let output;try{output=eval(source)}catch(e){output=e.message+"\n"+e.stack,window.__err=e}return output},document.__runTests=function runTests(tests=[]){const code=source,editor={getValue:()=>source};return window.__err?Rx.Observable.from(tests).map(e=>Object.assign({},e,{err:window.__err.message+"\n"+window.__err.stack,message:window.__err.message,stack:window.__err.stack})).toArray().do(()=>{window.__err=null}):Rx.Observable.from(tests,null,null,Rx.Scheduler.default).delay(200).flatMap(({text:text,testString:testString})=>{const assert=chai.assert,getUserInput=__getUserInput,newTest={text:text,testString:testString};let test,__result;try{test=eval(testString),"function"==typeof test&&(__result=test(getUserInput),isPromise(__result)&&(__result=Rx.Observable.fromPromise(__result))),__result&&"function"==typeof __result.subscribe||(__result=Rx.Observable.of(null))}catch(e){__result=Rx.Observable.throw(e)}return __result.timeout(testTimeout).map(()=>(newTest.pass=!0,newTest)).catch(e=>{let t=e.message||"";const r=t.indexOf(": expected");return-1!==r&&(t=t.slice(0,r)),t=t.replace(/<code>(.*?)<\/code>/g,"$1"),newTest.err=e.message+"\n"+e.stack,newTest.stack=e.stack,newTest.message=t,Rx.Observable.of(newTest)})}).toArray()},frameReady.next({checkChallengePayload:checkChallengePayload})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYmI4YTgwNzdhMmIyZGMxMDNiN2IiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9mcmFtZS1ydW5uZXIuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGVzdFRpbWVvdXQiLCJSeCIsImZyYW1lUmVhZHkiLCJfX2ZyYW1lUmVhZHkiLCJjaGFpIiwicGFyZW50Iiwic291cmNlIiwiX19zb3VyY2UiLCJfX2dldFVzZXJJbnB1dCIsIngiLCJjaGVja0NoYWxsZW5nZVBheWxvYWQiLCJfX2NoZWNrQ2hhbGxlbmdlUGF5bG9hZCIsImlzUHJvbWlzZSIsInZhbHVlIiwic3Vic2NyaWJlIiwidGhlbiIsIkRlZXBFcXVhbCIsImEiLCJiIiwiSlNPTiIsInN0cmluZ2lmeSIsIkRlZXBGcmVlemUiLCJvIiwiT2JqZWN0IiwiZnJlZXplIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJpc0Zyb3plbiIsIkVuenltZSIsIndpbmRvdyIsIl9fZ2V0SnNPdXRwdXQiLCJnZXRKc091dHB1dCIsIl9fZXJyIiwib3V0cHV0IiwiZXZhbCIsImUiLCJtZXNzYWdlIiwic3RhY2siLCJfX3J1blRlc3RzIiwicnVuVGVzdHMiLCJ0ZXN0cyIsImNvZGUiLCJlZGl0b3IiLCJnZXRWYWx1ZSIsIk9ic2VydmFibGUiLCJmcm9tIiwibWFwIiwidGVzdCIsImFzc2lnbiIsImVyciIsInRvQXJyYXkiLCJkbyIsIlNjaGVkdWxlciIsImRlZmF1bHQiLCJkZWxheSIsImZsYXRNYXAiLCJ0ZXh0IiwidGVzdFN0cmluZyIsImFzc2VydCIsImdldFVzZXJJbnB1dCIsIm5ld1Rlc3QiLCJfX3Jlc3VsdCIsImZyb21Qcm9taXNlIiwib2YiLCJ0aHJvdyIsInRpbWVvdXQiLCJwYXNzIiwiY2F0Y2giLCJhc3NlcnRJbmRleCIsImluZGV4T2YiLCJzbGljZSIsInJlcGxhY2UiLCJuZXh0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FDLFdBQ0FFLEdBQUFILEVBQ0FJLFFBQUEsR0FVQSxPQU5BQyxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSw4QkN0Q0FXLFNBQUFDLGlCQUFBLDhCQUNBLElBQUFDLFlBQUEsSUFDQUMsR0FBQUgsU0FBQUcsR0FDQUMsV0FBQUosU0FBQUssYUFDQUMsS0FBQUMsT0FBQUQsS0FDQUUsT0FBQVIsU0FBQVMsU0FDQUMsZUFBQVYsU0FBQVUsZ0JBQUEsQ0FBQUMsTUFDQUMsc0JBQUFaLFNBQUFhLHdCQUVBLFNBQUFDLFVBQUFDLEdBQ0EsT0FDQUEsR0FDQSxtQkFBQUEsRUFBQUMsV0FDQSxtQkFBQUQsRUFBQUUsS0FLQSxNQUFBQyxVQUFBLENBQUFDLEVBQUFDLElBQUFDLEtBQUFDLFVBQUFILEtBQUFFLEtBQUFDLFVBQUFGLEdBR0EsSUFBQUcsV0FBQUMsSUFDQUMsT0FBQUMsT0FBQUYsR0FDQUMsT0FBQUUsb0JBQUFILEdBQUFJLFFBQUEsU0FBQUMsSUFFQUwsRUFBQU0sZUFBQUQsSUFDQSxPQUFBTCxFQUFBSyxJQUNBLGlCQUFBTCxFQUFBSyxJQUFBLG1CQUFBTCxFQUFBSyxJQUNBSixPQUFBTSxTQUFBUCxFQUFBSyxLQUVBTixXQUFBQyxFQUFBSyxNQUdBTCxHQUdBeEIsU0FBQWdDLFNBQ0FDLE9BQUFELE9BQUFoQyxTQUFBZ0MsUUFHQWhDLFNBQUFrQyxjQUFBLFNBQUFDLGNBQ0EsR0FBQUYsT0FBQUcsTUFDQSxPQUFBSCxPQUFBRyxNQUVBLElBQUFDLE9BQ0EsSUFFQUEsT0FBQUMsS0FBQTlCLFFBRUssTUFBQStCLEdBQ0xGLE9BQUFFLEVBQUFDLFFBQUEsS0FBQUQsRUFBQUUsTUFDQVIsT0FBQUcsTUFBQUcsRUFFQSxPQUFBRixRQUdBckMsU0FBQTBDLFdBQUEsU0FBQUMsU0FBQUMsVUFFQSxNQUFBQyxLQUFBckMsT0FDQXNDLFFBQ0FDLFNBQUEsSUFDQXZDLFFBSUEsT0FBQXlCLE9BQUFHLE1BQ0FqQyxHQUFBNkMsV0FBQUMsS0FBQUwsT0FDQU0sSUFBQUMsR0FFQTFCLE9BQUEyQixVQUFpQ0QsR0FDakNFLElBQUFwQixPQUFBRyxNQUFBSSxRQUFBLEtBQUFQLE9BQUFHLE1BQUFLLE1BQ0FELFFBQUFQLE9BQUFHLE1BQUFJLFFBQ0FDLE1BQUFSLE9BQUFHLE1BQUFLLFNBSUFhLFVBQ0FDLEdBQUEsS0FDQXRCLE9BQUFHLE1BQUEsT0FPQWpDLEdBQUE2QyxXQUFBQyxLQUFBTCxNQUFBLFVBQUF6QyxHQUFBcUQsVUFBQUMsU0FFQUMsTUFBQSxLQUVBQyxRQUFBLEVBQW1CQyxVQUFBQywwQkFDbkIsTUFBQUMsT0FBQXhELEtBQUF3RCxPQUNBQyxhQUFBckQsZUFFQXNELFNBQTJCSixVQUFBQyx1QkFDM0IsSUFBQVYsS0FDQWMsU0FNQSxJQUtBZCxLQUFBYixLQUFBdUIsWUFFQSxtQkFBQVYsT0FHQWMsU0FBQWQsS0FBQVksY0FFQWpELFVBQUFtRCxZQUVBQSxTQUFBOUQsR0FBQTZDLFdBQUFrQixZQUFBRCxZQUlBQSxVQUFBLG1CQUFBQSxTQUFBakQsWUFFQWlELFNBQUE5RCxHQUFBNkMsV0FBQW1CLEdBQUEsT0FFVyxNQUFBNUIsR0FHWDBCLFNBQUE5RCxHQUFBNkMsV0FBQW9CLE1BQUE3QixHQUVBLE9BQUEwQixTQUNBSSxRQUFBbkUsYUFDQWdELElBQUEsS0FJQWMsUUFBQU0sTUFBQSxFQUNBTixVQUVBTyxNQUFBbEIsSUFHQSxJQUFBYixFQUFBYSxFQUFBYixTQUFBLEdBQ0EsTUFBQWdDLEVBQUFoQyxFQUFBaUMsUUFBQSxjQVNBLE9BUkEsSUFBQUQsSUFDQWhDLElBQUFrQyxNQUFBLEVBQUFGLElBRUFoQyxJQUFBbUMsUUFBQSw2QkFDQVgsUUFBQVgsTUFBQWIsUUFBQSxLQUFBYSxFQUFBWixNQUNBdUIsUUFBQXZCLE1BQUFZLEVBQUFaLE1BQ0F1QixRQUFBeEIsVUFFQXJDLEdBQUE2QyxXQUFBbUIsR0FBQUgsYUFJQVYsV0FLQWxELFdBQUF3RSxNQUFtQmhFIiwiZmlsZSI6ImZyYW1lLXJ1bm5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGJiOGE4MDc3YTJiMmRjMTAzYjdiIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICB2YXIgdGVzdFRpbWVvdXQgPSA1MDAwO1xuICB2YXIgUnggPSBkb2N1bWVudC5SeDtcbiAgdmFyIGZyYW1lUmVhZHkgPSBkb2N1bWVudC5fX2ZyYW1lUmVhZHk7XG4gIHZhciBjaGFpID0gcGFyZW50LmNoYWk7XG4gIHZhciBzb3VyY2UgPSBkb2N1bWVudC5fX3NvdXJjZTtcbiAgdmFyIF9fZ2V0VXNlcklucHV0ID0gZG9jdW1lbnQuX19nZXRVc2VySW5wdXQgfHwgKHggPT4geCk7XG4gIHZhciBjaGVja0NoYWxsZW5nZVBheWxvYWQgPSBkb2N1bWVudC5fX2NoZWNrQ2hhbGxlbmdlUGF5bG9hZDtcblxuICBmdW5jdGlvbiBpc1Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdmFsdWUgJiZcbiAgICAgIHR5cGVvZiB2YWx1ZS5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiZcbiAgICAgIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nXG4gICAgKTtcbiAgfVxuICAvLyBGYWtlIERlZXAgRXF1YWwgZGVwZW5kZW5jeVxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuICBjb25zdCBEZWVwRXF1YWwgPSAoYSwgYikgPT4gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpO1xuXG4gIC8vIEhhcmRjb2RlIERlZXAgRnJlZXplIGRlcGVuZGVuY3lcbiAgdmFyIERlZXBGcmVlemUgPSBvID0+IHtcbiAgICBPYmplY3QuZnJlZXplKG8pO1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG8pLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgaWYgKFxuICAgICAgICBvLmhhc093blByb3BlcnR5KHByb3ApICYmXG4gICAgICAgIG9bcHJvcF0gIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiBvW3Byb3BdID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb1twcm9wXSA9PT0gJ2Z1bmN0aW9uJykgJiZcbiAgICAgICAgIU9iamVjdC5pc0Zyb3plbihvW3Byb3BdKVxuICAgICAgKSB7XG4gICAgICAgIERlZXBGcmVlemUob1twcm9wXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgaWYgKGRvY3VtZW50LkVuenltZSkge1xuICAgIHdpbmRvdy5Fbnp5bWUgPSBkb2N1bWVudC5Fbnp5bWU7XG4gIH1cblxuICBkb2N1bWVudC5fX2dldEpzT3V0cHV0ID0gZnVuY3Rpb24gZ2V0SnNPdXRwdXQoKSB7XG4gICAgaWYgKHdpbmRvdy5fX2Vycikge1xuICAgICAgcmV0dXJuIHdpbmRvdy5fX2VycjtcbiAgICB9XG4gICAgbGV0IG91dHB1dDtcbiAgICB0cnkge1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZXZhbCAqL1xuICAgICAgb3V0cHV0ID0gZXZhbChzb3VyY2UpO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1ldmFsICovXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgb3V0cHV0ID0gZS5tZXNzYWdlICsgJ1xcbicgKyBlLnN0YWNrO1xuICAgICAgd2luZG93Ll9fZXJyID0gZTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICBkb2N1bWVudC5fX3J1blRlc3RzID0gZnVuY3Rpb24gcnVuVGVzdHModGVzdHMgPSBbXSkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4gICAgY29uc3QgY29kZSA9IHNvdXJjZTtcbiAgICBjb25zdCBlZGl0b3IgPSB7XG4gICAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cbiAgICBpZiAod2luZG93Ll9fZXJyKSB7XG4gICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5mcm9tKHRlc3RzKVxuICAgICAgICAubWFwKHRlc3QgPT4ge1xuICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRlc3QsIHtcbiAgICAgICAgICAgIGVycjogd2luZG93Ll9fZXJyLm1lc3NhZ2UgKyAnXFxuJyArIHdpbmRvdy5fX2Vyci5zdGFjayxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHdpbmRvdy5fX2Vyci5tZXNzYWdlLFxuICAgICAgICAgICAgc3RhY2s6IHdpbmRvdy5fX2Vyci5zdGFja1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgfSlcbiAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAuZG8oKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5fX2VyciA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgdGVzdCBvbmUgYXQgYSB0aW1lXG4gICAgLy8gb24gbmV3IHN0YWNrc1xuICAgIHJldHVybiAoXG4gICAgICBSeC5PYnNlcnZhYmxlLmZyb20odGVzdHMsIG51bGwsIG51bGwsIFJ4LlNjaGVkdWxlci5kZWZhdWx0KVxuICAgICAgICAvLyBhZGQgZGVsYXkgaGVyZSBmb3IgZmlyZWZveCB0byBjYXRjaCB1cFxuICAgICAgICAuZGVsYXkoMjAwKVxuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuICAgICAgICAuZmxhdE1hcCgoeyB0ZXh0LCB0ZXN0U3RyaW5nIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBhc3NlcnQgPSBjaGFpLmFzc2VydDtcbiAgICAgICAgICBjb25zdCBnZXRVc2VySW5wdXQgPSBfX2dldFVzZXJJbnB1dDtcbiAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzICovXG4gICAgICAgICAgY29uc3QgbmV3VGVzdCA9IHsgdGV4dCwgdGVzdFN0cmluZyB9O1xuICAgICAgICAgIGxldCB0ZXN0O1xuICAgICAgICAgIGxldCBfX3Jlc3VsdDtcblxuICAgICAgICAgIC8vIHVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmUgdG8gaW5zcGVjdFxuICAgICAgICAgIC8vIHRoZSBmcmFtZXJ1bm5lciBhcyBpdCBydW5zIHRlc3RzXG4gICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBkZXYgdG9vbHMgY29uc29sZSBpcyBvcGVuXG4gICAgICAgICAgLy8gZGVidWdnZXI7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWV2YWwgKi9cbiAgICAgICAgICAgIC8vIGV2YWwgdGVzdCBzdHJpbmcgdG8gYWN0dWFsIEphdmFTY3JpcHRcbiAgICAgICAgICAgIC8vIFRoaXMgcmV0dXJuIGNhbiBiZSBhIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBpLmUuIGZ1bmN0aW9uKCkgeyBhc3NlcnQodHJ1ZSwgJ2hhcHB5IGNvZGluZycpOyB9XG4gICAgICAgICAgICB0ZXN0ID0gZXZhbCh0ZXN0U3RyaW5nKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tZXZhbCAqL1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIC8vIGFsbCBhc3luYyB0ZXN0cyBtdXN0IHJldHVybiBhIHByb21pc2Ugb3Igb2JzZXJ2YWJsZVxuICAgICAgICAgICAgICAvLyBzeW5jIHRlc3RzIGNhbiByZXR1cm4gQW55IHR5cGVcbiAgICAgICAgICAgICAgX19yZXN1bHQgPSB0ZXN0KGdldFVzZXJJbnB1dCk7XG5cbiAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShfX3Jlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAvLyB0dXJuIHByb21pc2UgaW50byBhbiBvYnNlcnZhYmxlXG4gICAgICAgICAgICAgICAgX19yZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmZyb21Qcm9taXNlKF9fcmVzdWx0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV9fcmVzdWx0IHx8IHR5cGVvZiBfX3Jlc3VsdC5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHJlc3VsdCBpcyBhbiBvYnNlcnZhYmxlXG4gICAgICAgICAgICAgIF9fcmVzdWx0ID0gUnguT2JzZXJ2YWJsZS5vZihudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBzb21ldGhpbmcgdGhyZXcgYW4gdW5jYXVnaHQgZXJyb3JcbiAgICAgICAgICAgIC8vIHdlIGNhdGNoIGhlcmUgYW5kIHdyYXAgaXQgaW4gYW4gb2JzZXJ2YWJsZVxuICAgICAgICAgICAgX19yZXN1bHQgPSBSeC5PYnNlcnZhYmxlLnRocm93KGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX19yZXN1bHRcbiAgICAgICAgICAgIC50aW1lb3V0KHRlc3RUaW1lb3V0KVxuICAgICAgICAgICAgLm1hcCgoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdGhlIHJlc3VsdCBvZiBhIHByb21pc2Uvb2JzZXJ2YWJsZS9jYiBoZXJlXG4gICAgICAgICAgICAgIC8vIGFsbCBkYXRhIGFzc2VydHMgc2hvdWxkIGhhcHBlbiBmdXJ0aGVyIHVwIHRoZSBjaGFpblxuICAgICAgICAgICAgICAvLyBtYXJrIHRlc3QgYXMgcGFzc2luZ1xuICAgICAgICAgICAgICBuZXdUZXN0LnBhc3MgPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV3VGVzdDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgLy8gd2UgY2F0Y2ggdGhlIGVycm9yIGhlcmUgdG8gcHJldmVudCB0aGUgZXJyb3IgZnJvbSBidWJibGluZyB1cFxuICAgICAgICAgICAgICAvLyBhbmQgY29sbGFwc2luZyB0aGUgcGlwZVxuICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGVyci5tZXNzYWdlIHx8ICcnO1xuICAgICAgICAgICAgICBjb25zdCBhc3NlcnRJbmRleCA9IG1lc3NhZ2UuaW5kZXhPZignOiBleHBlY3RlZCcpO1xuICAgICAgICAgICAgICBpZiAoYXNzZXJ0SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2Uuc2xpY2UoMCwgYXNzZXJ0SW5kZXgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLnJlcGxhY2UoLzxjb2RlPiguKj8pPFxcL2NvZGU+L2csICckMScpO1xuICAgICAgICAgICAgICBuZXdUZXN0LmVyciA9IGVyci5tZXNzYWdlICsgJ1xcbicgKyBlcnIuc3RhY2s7XG4gICAgICAgICAgICAgIG5ld1Rlc3Quc3RhY2sgPSBlcnIuc3RhY2s7XG4gICAgICAgICAgICAgIG5ld1Rlc3QubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgIC8vIFJ4SlMgY2F0Y2ggZXhwZWN0cyBhbiBvYnNlcnZhYmxlIGFzIGEgcmV0dXJuXG4gICAgICAgICAgICAgIHJldHVybiBSeC5PYnNlcnZhYmxlLm9mKG5ld1Rlc3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC8vIGdhdGhlciB0ZXN0cyBiYWNrIGludG8gYW4gYXJyYXlcbiAgICAgICAgLnRvQXJyYXkoKVxuICAgICk7XG4gIH07XG5cbiAgLy8gbm90aWZ5IHRoYXQgdGhlIHdpbmRvdyBtZXRob2RzIGFyZSByZWFkeSB0byBydW5cbiAgZnJhbWVSZWFkeS5uZXh0KHsgY2hlY2tDaGFsbGVuZ2VQYXlsb2FkIH0pO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jbGllbnQvZnJhbWUtcnVubmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=